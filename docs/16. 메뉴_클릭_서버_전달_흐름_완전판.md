# Layout ë°©ì‹: ë©”ë‰´ í´ë¦­ â†’ ì„œë²„ ìš”ì²­ ì „ì²´ íë¦„

## ğŸ¯ í•µì‹¬ ìš”ì•½

**í´ë¼ì´ì–¸íŠ¸ì—ì„œ ë©”ë‰´ í´ë¦­ ì‹œ ì„œë²„ë¡œ ì „ë‹¬ë˜ëŠ” ë¡œì§**:

```
ì‚¬ìš©ì í´ë¦­ â†’ React Router â†’ ì»´í¬ë„ŒíŠ¸ ë Œë”ë§ â†’ Service í˜¸ì¶œ â†’ API í´ë¼ì´ì–¸íŠ¸ â†’ ì„œë²„
```

**ì¤‘ìš”**: ë©”ë‰´ í´ë¦­ ìì²´ëŠ” ì„œë²„ì— ì „ë‹¬ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. í´ë¦­ í›„ ë Œë”ë§ëœ í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸ê°€ í•„ìš”í•œ ë°ì´í„°ë¥¼ ì„œë²„ì—ì„œ fetchí•©ë‹ˆë‹¤.

---

## ğŸ“Š ì „ì²´ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ë¸Œë¼ìš°ì € (Client)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  1. Sidebar.jsx                                              â”‚
â”‚     â””â”€ ë©”ë‰´ í´ë¦­ ì´ë²¤íŠ¸ (onClick)                            â”‚
â”‚         â””â”€ navigate('/products')  â† React Router            â”‚
â”‚                                                               â”‚
â”‚  2. React Router                                             â”‚
â”‚     â””â”€ URL ë³€ê²½: / â†’ /products                               â”‚
â”‚         â””â”€ <Route path="/products" element={<Products />} /> â”‚
â”‚                                                               â”‚
â”‚  3. Products.jsx (ì»´í¬ë„ŒíŠ¸ ë Œë”ë§)                           â”‚
â”‚     â””â”€ useQuery() â† React Query                              â”‚
â”‚         â””â”€ productService.getAllProducts()                   â”‚
â”‚                                                               â”‚
â”‚  4. productService.js                                        â”‚
â”‚     â””â”€ api.get('/products')                                  â”‚
â”‚                                                               â”‚
â”‚  5. api.js (Axios ì¸ìŠ¤í„´ìŠ¤)                                  â”‚
â”‚     â””â”€ GET /api/products                                     â”‚
â”‚         â””â”€ Headers: Authorization: Bearer <token>           â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ HTTP Request
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ì„œë²„ (Backend/Gateway)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  6. API Gateway (ì˜ˆ: Spring Cloud Gateway)                   â”‚
â”‚     â””â”€ /api/products â†’ Product Service ë¼ìš°íŒ…               â”‚
â”‚                                                               â”‚
â”‚  7. Product Service                                          â”‚
â”‚     â””â”€ GET /products                                         â”‚
â”‚         â””â”€ @GetMapping("/products")                          â”‚
â”‚             â””â”€ productService.getAllProducts()               â”‚
â”‚                 â””â”€ DB ì¿¼ë¦¬ ì‹¤í–‰                              â”‚
â”‚                     â””â”€ List<Product> ë°˜í™˜                    â”‚
â”‚                                                               â”‚
â”‚  8. Response                                                 â”‚
â”‚     â””â”€ JSON: { content: [...], page: 0, size: 12 }          â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ HTTP Response
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ë¸Œë¼ìš°ì € (Client)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  9. api.js (Axios)                                           â”‚
â”‚     â””â”€ response.data ë°˜í™˜                                    â”‚
â”‚                                                               â”‚
â”‚  10. productService.js                                       â”‚
â”‚      â””â”€ return response.data                                 â”‚
â”‚                                                               â”‚
â”‚  11. React Query (useQuery)                                  â”‚
â”‚      â””â”€ ë°ì´í„° ìºì‹± ë° ìƒíƒœ ê´€ë¦¬                            â”‚
â”‚          â””â”€ data, isLoading, error                          â”‚
â”‚                                                               â”‚
â”‚  12. Products.jsx                                            â”‚
â”‚      â””â”€ UI ë Œë”ë§ (ìƒí’ˆ ëª©ë¡ í‘œì‹œ)                          â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” ë‹¨ê³„ë³„ ìƒì„¸ ë¶„ì„

### Step 1: ì‚¬ìš©ìê°€ Sidebar ë©”ë‰´ í´ë¦­

**íŒŒì¼**: `components/app/Sidebar.jsx` (206-218ë²ˆ ì¤„)

```javascript
const handleMenuClick = (menu) => {
  console.log('ğŸ–±ï¸ [Sidebar] ë©”ë‰´ í´ë¦­:', menu.name)
  
  if (menu.children && menu.children.length > 0) {
    // í•˜ìœ„ ë©”ë‰´ê°€ ìˆìœ¼ë©´ í™•ì¥/ì¶•ì†Œ
    toggleMenu(menu.id)
  } else if (menu.path) {
    // ê²½ë¡œê°€ ìˆìœ¼ë©´ í˜ì´ì§€ ì´ë™
    console.log('ğŸ”— [Sidebar] í˜ì´ì§€ ì´ë™:', menu.path)
    navigate(menu.path)  // â† React Routerì˜ navigate í•¨ìˆ˜
    
    if (window.innerWidth < 768) {
      onClose()  // ëª¨ë°”ì¼ì—ì„œëŠ” ì‚¬ì´ë“œë°” ë‹«ê¸°
    }
  }
}
```

**ì¤‘ìš” í¬ì¸íŠ¸**:
- `navigate(menu.path)`ëŠ” **ì„œë²„ ìš”ì²­ì„ ë³´ë‚´ì§€ ì•ŠìŒ**
- ë‹¨ìˆœíˆ ë¸Œë¼ìš°ì € URLì„ ë³€ê²½í•˜ê³  í´ë¼ì´ì–¸íŠ¸ ë¼ìš°íŒ… ìˆ˜í–‰
- ì˜ˆ: `navigate('/products')` â†’ URLì´ `/products`ë¡œ ë³€ê²½

---

### Step 2: React Routerê°€ URL ë³€ê²½ ê°ì§€

**íŒŒì¼**: `App.jsx`

```javascript
function App() {
  return (
    <Routes location={location}>
      <Route element={<Layout />}>
        {/* ... */}
        <Route path="/products" element={<Products />} />
        {/* ... */}
      </Route>
    </Routes>
  )
}
```

**ë™ì‘**:
1. URLì´ `/products`ë¡œ ë³€ê²½ë¨
2. React Routerê°€ ë§¤ì¹­ë˜ëŠ” ë¼ìš°íŠ¸ ì°¾ê¸°
3. `<Route path="/products" element={<Products />} />` ë§¤ì¹­
4. `<Products />` ì»´í¬ë„ŒíŠ¸ ë Œë”ë§

**ì¤‘ìš”**: ì´ ê³¼ì •ë„ **ì„œë²„ ìš”ì²­ ì—†ìŒ** (SPAì˜ í´ë¼ì´ì–¸íŠ¸ ë¼ìš°íŒ…)

---

### Step 3: Products ì»´í¬ë„ŒíŠ¸ ë Œë”ë§ ë° ë°ì´í„° ìš”ì²­

**íŒŒì¼**: `components/product/pages/Products.jsx` (14-33ë²ˆ ì¤„)

```javascript
const Products = () => {
  const [page, setPage] = useState(0)
  const [searchKeyword, setSearchKeyword] = useState('')
  const [category, setCategory] = useState('')
  const [priceRange, setPriceRange] = useState({ min: '', max: '' })

  // React Queryë¡œ ë°ì´í„° í˜ì¹­
  const { data: productsData, isLoading, error } = useQuery({
    queryKey: ['products', page, searchKeyword, category, priceRange],
    queryFn: () => {
      // ì—¬ê¸°ì„œ ì‹¤ì œ ì„œë²„ ìš”ì²­ ì‹œì‘!
      if (searchKeyword) {
        return productService.searchProducts(searchKeyword, page, 12)
      }
      if (category) {
        return productService.getProductsByCategory(category, page, 12)
      }
      if (priceRange.min || priceRange.max) {
        return productService.getProductsByPriceRange(
          priceRange.min || 0,
          priceRange.max || 999999999,
          page,
          12
        )
      }
      // ê¸°ë³¸: ëª¨ë“  ìƒí’ˆ ì¡°íšŒ
      return productService.getAllProducts(page, 12)
    },
  })

  // ... UI ë Œë”ë§
}
```

**ì¤‘ìš” í¬ì¸íŠ¸**:
- ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ë˜ë©´ `useQuery`ê°€ ìë™ìœ¼ë¡œ `queryFn` ì‹¤í–‰
- `queryFn` ë‚´ë¶€ì—ì„œ `productService.getAllProducts()` í˜¸ì¶œ
- **ì—¬ê¸°ì„œ ë¹„ë¡œì†Œ ì„œë²„ ìš”ì²­ì´ ì‹œì‘ë¨!**

---

### Step 4: Product Service í˜¸ì¶œ

**íŒŒì¼**: `components/product/services/productService.js` (5-10ë²ˆ ì¤„)

```javascript
import api from '../../app/api'

export const productService = {
  // ìƒí’ˆ ëª©ë¡ ì¡°íšŒ (í˜ì´ì§•)
  getAllProducts: async (page = 0, size = 12, sortBy = 'createdAt', direction = 'DESC') => {
    const response = await api.get('/products', {
      params: { page, size, sortBy, direction },
    })
    return response.data
  },

  // ìƒí’ˆ ìƒì„¸ ì¡°íšŒ
  getProductById: async (id) => {
    const response = await api.get(`/products/${id}`)
    return response.data
  },

  // ì¹´í…Œê³ ë¦¬ë³„ ìƒí’ˆ ì¡°íšŒ
  getProductsByCategory: async (category, page = 0, size = 12) => {
    const response = await api.get(`/products/category/${category}`, {
      params: { page, size },
    })
    return response.data
  },

  // ... ê¸°íƒ€ ë©”ì„œë“œë“¤
}
```

**ì—­í• **:
- ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ìº¡ìŠí™”
- API ì—”ë“œí¬ì¸íŠ¸ ì¶”ìƒí™”
- ê³µí†µ API í´ë¼ì´ì–¸íŠ¸(`api`) ì‚¬ìš©

---

### Step 5: API í´ë¼ì´ì–¸íŠ¸ (Axios) - ì‹¤ì œ HTTP ìš”ì²­

**íŒŒì¼**: `components/app/api.js`

```javascript
import axios from 'axios'

const API_BASE_URL = '/api'

const api = axios.create({
  baseURL: API_BASE_URL,
  timeout: 30000,
  headers: {
    'Content-Type': 'application/json',
  },
})

// Request interceptor - ìš”ì²­ ì „ í† í° ì¶”ê°€
api.interceptors.request.use(
  (config) => {
    // localStorageì—ì„œ token ê°€ì ¸ì˜¤ê¸°
    let token = localStorage.getItem('token')
    
    // tokenì´ ì—†ìœ¼ë©´ auth-storageì—ì„œ ì‹œë„
    if (!token) {
      const authData = localStorage.getItem('auth-storage')
      if (authData) {
        try {
          const parsed = JSON.parse(authData)
          token = parsed?.state?.token
          if (token) {
            localStorage.setItem('token', token)
          }
        } catch (e) {
          console.error('Failed to parse auth-storage:', e)
        }
      }
    }
    
    console.log('=== API REQUEST ===')
    console.log('Token:', token ? token.substring(0, 20) + '...' : 'NO TOKEN')
    console.log('URL:', config.url)
    
    // Authorization í—¤ë” ì¶”ê°€
    if (token) {
      config.headers.Authorization = `Bearer ${token}`
    }
    
    return config
  },
  (error) => Promise.reject(error)
)

// Response interceptor - ì‘ë‹µ ì²˜ë¦¬
api.interceptors.response.use(
  (response) => response,
  (error) => {
    if (error.response?.status === 401) {
      // ì¸ì¦ ì‹¤íŒ¨ ì‹œ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ
      localStorage.removeItem('token')
      localStorage.removeItem('auth-storage')
      window.location.href = '/login'
    }
    return Promise.reject(error)
  }
)

export default api
```

**ì‹¤ì œ HTTP ìš”ì²­**:
```http
GET /api/products?page=0&size=12&sortBy=createdAt&direction=DESC HTTP/1.1
Host: localhost:3000
Content-Type: application/json
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

**ì¤‘ìš” í¬ì¸íŠ¸**:
- `baseURL: '/api'` â†’ ëª¨ë“  ìš”ì²­ì´ `/api` prefix ì‚¬ìš©
- Request Interceptorì—ì„œ ìë™ìœ¼ë¡œ JWT í† í° ì¶”ê°€
- Response Interceptorì—ì„œ 401 ì—ëŸ¬ ì²˜ë¦¬ (ìë™ ë¡œê·¸ì•„ì›ƒ)

---

### Step 6: ì„œë²„ë¡œ HTTP ìš”ì²­ ì „ì†¡

**ë„¤íŠ¸ì›Œí¬ íë¦„**:

```
Browser (localhost:3000)
    â†“
    HTTP GET /api/products?page=0&size=12
    â†“
API Gateway (localhost:8080 ë˜ëŠ” Gateway ì„œë²„)
    â†“
    ë¼ìš°íŒ…: /api/products â†’ Product Service
    â†“
Product Service (localhost:8081 ë˜ëŠ” Product ì„œë²„)
    â†“
    Controller â†’ Service â†’ Repository â†’ Database
    â†“
    Response: JSON ë°ì´í„°
```

**API Gateway ì—­í• **:
```yaml
# Gateway ì„¤ì • ì˜ˆì‹œ (application.yml)
spring:
  cloud:
    gateway:
      routes:
        - id: product-service
          uri: http://localhost:8081
          predicates:
            - Path=/api/products/**
          filters:
            - RewritePath=/api/(?<segment>.*), /$\{segment}
```

---

### Step 7: ì„œë²„ ì‚¬ì´ë“œ ì²˜ë¦¬

**ë°±ì—”ë“œ Controller ì˜ˆì‹œ**:

```java
@RestController
@RequestMapping("/products")
public class ProductController {
    
    @Autowired
    private ProductService productService;
    
    @GetMapping
    public ResponseEntity<PageResponse<ProductDto>> getAllProducts(
        @RequestParam(defaultValue = "0") int page,
        @RequestParam(defaultValue = "12") int size,
        @RequestParam(defaultValue = "createdAt") String sortBy,
        @RequestParam(defaultValue = "DESC") String direction
    ) {
        // 1. ìš”ì²­ íŒŒë¼ë¯¸í„° ê²€ì¦
        // 2. JWT í† í°ì—ì„œ ì‚¬ìš©ì ì •ë³´ ì¶”ì¶œ (Spring Security)
        // 3. ê¶Œí•œ ì²´í¬
        // 4. Service ë ˆì´ì–´ í˜¸ì¶œ
        PageResponse<ProductDto> products = productService.getAllProducts(
            page, size, sortBy, direction
        );
        
        // 5. ì‘ë‹µ ë°˜í™˜
        return ResponseEntity.ok(products);
    }
    
    @GetMapping("/{id}")
    public ResponseEntity<ProductDto> getProductById(@PathVariable Long id) {
        ProductDto product = productService.getProductById(id);
        return ResponseEntity.ok(product);
    }
}
```

**Service ë ˆì´ì–´**:

```java
@Service
public class ProductService {
    
    @Autowired
    private ProductRepository productRepository;
    
    public PageResponse<ProductDto> getAllProducts(
        int page, int size, String sortBy, String direction
    ) {
        // 1. Pageable ê°ì²´ ìƒì„±
        Sort sort = Sort.by(
            direction.equals("DESC") ? Sort.Direction.DESC : Sort.Direction.ASC,
            sortBy
        );
        Pageable pageable = PageRequest.of(page, size, sort);
        
        // 2. DB ì¡°íšŒ
        Page<Product> productPage = productRepository.findAll(pageable);
        
        // 3. DTO ë³€í™˜
        List<ProductDto> products = productPage.getContent().stream()
            .map(this::convertToDto)
            .collect(Collectors.toList());
        
        // 4. PageResponse ìƒì„±
        return PageResponse.<ProductDto>builder()
            .content(products)
            .page(page)
            .size(size)
            .totalElements(productPage.getTotalElements())
            .totalPages(productPage.getTotalPages())
            .build();
    }
}
```

**Repository**:

```java
@Repository
public interface ProductRepository extends JpaRepository<Product, Long> {
    Page<Product> findAll(Pageable pageable);
    
    Page<Product> findByCategory(String category, Pageable pageable);
    
    Page<Product> findByNameContaining(String keyword, Pageable pageable);
    
    @Query("SELECT p FROM Product p WHERE p.price BETWEEN :minPrice AND :maxPrice")
    Page<Product> findByPriceRange(
        @Param("minPrice") BigDecimal minPrice,
        @Param("maxPrice") BigDecimal maxPrice,
        Pageable pageable
    );
}
```

---

### Step 8: ì„œë²„ ì‘ë‹µ

**Response Body** (JSON):

```json
{
  "content": [
    {
      "id": 1,
      "name": "ë…¸íŠ¸ë¶",
      "description": "ê³ ì„±ëŠ¥ ë…¸íŠ¸ë¶",
      "price": 1500000,
      "category": "ì „ìì œí’ˆ",
      "stock": 50,
      "imageUrl": "https://example.com/laptop.jpg",
      "createdAt": "2024-01-01T10:00:00"
    },
    {
      "id": 2,
      "name": "ë§ˆìš°ìŠ¤",
      "description": "ë¬´ì„  ë§ˆìš°ìŠ¤",
      "price": 35000,
      "category": "ì „ìì œí’ˆ",
      "stock": 200,
      "imageUrl": "https://example.com/mouse.jpg",
      "createdAt": "2024-01-02T11:30:00"
    }
    // ... ì´ 12ê°œ (size=12)
  ],
  "page": 0,
  "size": 12,
  "totalElements": 150,
  "totalPages": 13,
  "first": true,
  "last": false
}
```

**HTTP Response**:

```http
HTTP/1.1 200 OK
Content-Type: application/json
Content-Length: 2453
Date: Mon, 06 Jan 2025 15:30:00 GMT

{
  "content": [...],
  "page": 0,
  ...
}
```

---

### Step 9-12: í´ë¼ì´ì–¸íŠ¸ ë°ì´í„° ìˆ˜ì‹  ë° ë Œë”ë§

**api.js â†’ productService.js â†’ React Query**:

```javascript
// 9. api.js - Axiosê°€ ì‘ë‹µ ìˆ˜ì‹ 
api.get('/products', { params: { page: 0, size: 12 } })
  .then(response => {
    // response.data = ì„œë²„ì—ì„œ ë³´ë‚¸ JSON
    return response.data
  })

// 10. productService.js - ë°ì´í„° ë°˜í™˜
getAllProducts: async (page, size) => {
  const response = await api.get('/products', { params: { page, size } })
  return response.data  // â† ì´ ë°ì´í„°ê°€ React Queryë¡œ ì „ë‹¬ë¨
}

// 11. React Query - ë°ì´í„° ìºì‹± ë° ìƒíƒœ ê´€ë¦¬
const { data: productsData, isLoading, error } = useQuery({
  queryKey: ['products', page],
  queryFn: () => productService.getAllProducts(page, 12),
  // ìë™ìœ¼ë¡œ ë¡œë”©, ì—ëŸ¬, ë°ì´í„° ìƒíƒœ ê´€ë¦¬
})

// 12. Products.jsx - UI ë Œë”ë§
return (
  <div>
    {isLoading && <Loader />}
    {error && <ErrorMessage />}
    {productsData && (
      <ProductList 
        products={productsData.content} 
        totalPages={productsData.totalPages}
      />
    )}
  </div>
)
```

---

## ğŸ”„ ì „ì²´ ë°ì´í„° íë¦„ ìš”ì•½

### 1. ë©”ë‰´ í´ë¦­ (í´ë¼ì´ì–¸íŠ¸)

```javascript
// Sidebar.jsx
<button onClick={() => navigate('/products')}>
  ìƒí’ˆ ê´€ë¦¬
</button>
```

### 2. URL ë³€ê²½ (React Router)

```
ì´ì „: http://localhost:3000/dashboard
ì´í›„: http://localhost:3000/products
```

### 3. ì»´í¬ë„ŒíŠ¸ ë Œë”ë§

```javascript
// App.jsx
<Route path="/products" element={<Products />} />
```

### 4. ë°ì´í„° í˜ì¹­ (useQuery)

```javascript
// Products.jsx
useQuery({
  queryKey: ['products'],
  queryFn: () => productService.getAllProducts()
})
```

### 5. API í˜¸ì¶œ (Service)

```javascript
// productService.js
api.get('/products', { params: { page: 0, size: 12 } })
```

### 6. HTTP ìš”ì²­ (Axios)

```http
GET /api/products?page=0&size=12 HTTP/1.1
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

### 7. ì„œë²„ ì²˜ë¦¬

```java
@GetMapping("/products")
public ResponseEntity<PageResponse<ProductDto>> getAllProducts(
    @RequestParam int page,
    @RequestParam int size
) {
    return ResponseEntity.ok(productService.getAllProducts(page, size));
}
```

### 8. ì‘ë‹µ ë°˜í™˜

```json
{
  "content": [...],
  "page": 0,
  "size": 12,
  "totalElements": 150
}
```

### 9. UI ì—…ë°ì´íŠ¸

```javascript
<ProductList products={productsData.content} />
```

---

## ğŸ’¡ í•µì‹¬ ê°œë…

### 1. ë©”ë‰´ í´ë¦­ì€ ì„œë²„ì— ì „ë‹¬ë˜ì§€ ì•ŠìŒ

**ì™œ?**
- ReactëŠ” SPA (Single Page Application)
- ë©”ë‰´ í´ë¦­ì€ í´ë¼ì´ì–¸íŠ¸ ë¼ìš°íŒ…ë§Œ ìˆ˜í–‰
- í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ ì—†ì´ URLë§Œ ë³€ê²½

**ì–¸ì œ ì„œë²„ ìš”ì²­?**
- ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ë  ë•Œ
- ë°ì´í„°ê°€ í•„ìš”í•  ë•Œ (useQuery, useEffect ë“±)

---

### 2. React RouterëŠ” í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ ë¼ìš°íŒ…

```
ì „í†µì ì¸ MPA (Multi-Page Application):
ì‚¬ìš©ì í´ë¦­ â†’ ì„œë²„ ìš”ì²­ â†’ HTML ì „ì²´ ë°˜í™˜ â†’ í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨

React SPA (Single-Page Application):
ì‚¬ìš©ì í´ë¦­ â†’ URL ë³€ê²½ â†’ ì»´í¬ë„ŒíŠ¸ ë Œë”ë§ â†’ í•„ìš”í•œ ë°ì´í„°ë§Œ ìš”ì²­
```

---

### 3. ë°ì´í„° í˜ì¹­ì€ ì»´í¬ë„ŒíŠ¸ì˜ ì±…ì„

```javascript
const Products = () => {
  // ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ë˜ë©´ ìë™ìœ¼ë¡œ ë°ì´í„° ìš”ì²­
  const { data } = useQuery({
    queryKey: ['products'],
    queryFn: () => productService.getAllProducts()
  })
  
  return <ProductList products={data} />
}
```

---

### 4. API í´ë¼ì´ì–¸íŠ¸ì˜ ì—­í• 

```javascript
// api.js
const api = axios.create({
  baseURL: '/api',  // ëª¨ë“  ìš”ì²­ì— /api prefix
  timeout: 30000,
})

// Request Interceptor: ëª¨ë“  ìš”ì²­ì— ìë™ìœ¼ë¡œ í† í° ì¶”ê°€
api.interceptors.request.use((config) => {
  const token = localStorage.getItem('token')
  if (token) {
    config.headers.Authorization = `Bearer ${token}`
  }
  return config
})

// Response Interceptor: 401 ì—ëŸ¬ ìë™ ì²˜ë¦¬
api.interceptors.response.use(
  (response) => response,
  (error) => {
    if (error.response?.status === 401) {
      window.location.href = '/login'
    }
    return Promise.reject(error)
  }
)
```

---

## ğŸŒ ë„¤íŠ¸ì›Œí¬ ë ˆë²¨ ìƒì„¸ ë¶„ì„

### Browser Dev Toolsì—ì„œ ë³´ì´ëŠ” ê²ƒ

**Network íƒ­**:

```
Name: products?page=0&size=12&sortBy=createdAt&direction=DESC
Status: 200 OK
Type: xhr (AJAX ìš”ì²­)
Size: 2.5 KB
Time: 234 ms

Request Headers:
  Accept: application/json
  Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
  Content-Type: application/json

Response Headers:
  Content-Type: application/json
  Content-Length: 2453
  Date: Mon, 06 Jan 2025 15:30:00 GMT
```

---

## ğŸ” ì¸ì¦ íë¦„

### JWT í† í° ì „ë‹¬ ê³¼ì •

```
1. ë¡œê·¸ì¸ ì„±ê³µ
   â””â”€ ì„œë²„ì—ì„œ JWT í† í° ë°œê¸‰
       â””â”€ localStorageì— ì €ì¥

2. ë©”ë‰´ í´ë¦­ â†’ í˜ì´ì§€ ì´ë™ â†’ ë°ì´í„° ìš”ì²­
   â””â”€ api.js (Axios Interceptor)
       â””â”€ localStorageì—ì„œ í† í° ì½ê¸°
           â””â”€ Authorization í—¤ë”ì— ì¶”ê°€
               â””â”€ ì„œë²„ë¡œ ì „ì†¡

3. ì„œë²„ì—ì„œ í† í° ê²€ì¦
   â””â”€ Spring Security Filter
       â””â”€ JWT íŒŒì‹± ë° ê²€ì¦
           â””â”€ ìœ íš¨í•˜ë©´ ìš”ì²­ ì²˜ë¦¬
           â””â”€ ë¬´íš¨í•˜ë©´ 401 Unauthorized

4. 401 ì‘ë‹µ ì‹œ
   â””â”€ api.js (Response Interceptor)
       â””â”€ í† í° ì‚­ì œ
           â””â”€ /login í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
```

---

## ğŸ“‹ ì²´í¬ë¦¬ìŠ¤íŠ¸ - ë©”ë‰´ í´ë¦­ë¶€í„° ë°ì´í„° í‘œì‹œê¹Œì§€

### í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ

- [ ] Sidebarì—ì„œ ë©”ë‰´ í´ë¦­
- [ ] `navigate(menu.path)` í˜¸ì¶œ
- [ ] React Routerê°€ URL ë³€ê²½ ê°ì§€
- [ ] ë§¤ì¹­ë˜ëŠ” Routeì˜ ì»´í¬ë„ŒíŠ¸ ë Œë”ë§
- [ ] ì»´í¬ë„ŒíŠ¸ì—ì„œ `useQuery` ë˜ëŠ” `useEffect` ì‹¤í–‰
- [ ] Service í•¨ìˆ˜ í˜¸ì¶œ
- [ ] `api.get()` ë˜ëŠ” `api.post()` í˜¸ì¶œ
- [ ] Axiosê°€ HTTP ìš”ì²­ ìƒì„±
- [ ] Request Interceptorê°€ í† í° ì¶”ê°€
- [ ] ë¸Œë¼ìš°ì €ê°€ ì„œë²„ì— HTTP ìš”ì²­ ì „ì†¡

### ë„¤íŠ¸ì›Œí¬

- [ ] DNS ì¡°íšŒ (í•„ìš” ì‹œ)
- [ ] TCP ì—°ê²° ìˆ˜ë¦½
- [ ] TLS í•¸ë“œì…°ì´í¬ (HTTPS)
- [ ] HTTP ìš”ì²­ ì „ì†¡

### ì„œë²„ ì‚¬ì´ë“œ

- [ ] API Gatewayê°€ ìš”ì²­ ìˆ˜ì‹ 
- [ ] ë¼ìš°íŒ… ê·œì¹™ì— ë”°ë¼ í•´ë‹¹ ì„œë¹„ìŠ¤ë¡œ ì „ë‹¬
- [ ] Spring Security Filterì—ì„œ JWT ê²€ì¦
- [ ] Controllerê°€ ìš”ì²­ ìˆ˜ì‹ 
- [ ] Service ë ˆì´ì–´ í˜¸ì¶œ
- [ ] Repositoryì—ì„œ DB ì¡°íšŒ
- [ ] DTOë¡œ ë³€í™˜
- [ ] JSON ì§ë ¬í™”
- [ ] HTTP ì‘ë‹µ ìƒì„±

### í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ (ì‘ë‹µ ì²˜ë¦¬)

- [ ] ë¸Œë¼ìš°ì €ê°€ HTTP ì‘ë‹µ ìˆ˜ì‹ 
- [ ] Response Interceptor ì‹¤í–‰ (ì—ëŸ¬ ì²´í¬)
- [ ] Axiosê°€ JSON íŒŒì‹±
- [ ] Service í•¨ìˆ˜ê°€ `response.data` ë°˜í™˜
- [ ] React Queryê°€ ë°ì´í„° ìºì‹±
- [ ] ì»´í¬ë„ŒíŠ¸ state ì—…ë°ì´íŠ¸
- [ ] ë¦¬ë Œë”ë§
- [ ] UIì— ë°ì´í„° í‘œì‹œ

---

## ğŸ¯ ìµœì¢… ì •ë¦¬

### Q: ë©”ë‰´ í´ë¦­ ì‹œ ì„œë²„ ì‚¬ì´ë“œë¡œ ì–´ë–¤ ë¡œì§ì´ ì „ë‹¬ë˜ëŠ”ê°€?

**A: ë©”ë‰´ í´ë¦­ ìì²´ëŠ” ì„œë²„ì— ì „ë‹¬ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.**

ëŒ€ì‹ :
1. **ë©”ë‰´ í´ë¦­** â†’ í´ë¼ì´ì–¸íŠ¸ ë¼ìš°íŒ… (URL ë³€ê²½)
2. **ì»´í¬ë„ŒíŠ¸ ë Œë”ë§** â†’ í•„ìš”í•œ ë°ì´í„°ë¥¼ ìœ„í•œ API í˜¸ì¶œ
3. **API í˜¸ì¶œ** â†’ ì„œë²„ì— HTTP ìš”ì²­ (GET /api/products)
4. **ì„œë²„ ì²˜ë¦¬** â†’ ë°ì´í„°ë² ì´ìŠ¤ ì¡°íšŒ í›„ JSON ì‘ë‹µ
5. **ì‘ë‹µ ìˆ˜ì‹ ** â†’ UI ì—…ë°ì´íŠ¸

### ë©”ë‰´ í´ë¦­ê³¼ ì„œë²„ ìš”ì²­ì˜ ê´€ê³„

```
ë©”ë‰´ í´ë¦­ (Client)
    â†“
URL ë³€ê²½ (Client)
    â†“
ì»´í¬ë„ŒíŠ¸ ë Œë”ë§ (Client)
    â†“
useQuery ì‹¤í–‰ (Client)
    â†“
productService.getAllProducts() (Client)
    â†“
api.get('/products') (Client)
    â†“
HTTP ìš”ì²­ ìƒì„± (Client â†’ Server)
    â†“
========================== ë„¤íŠ¸ì›Œí¬ ==========================
    â†“
ì„œë²„ê°€ ìš”ì²­ ìˆ˜ì‹  (Server)
    â†“
Controller ì²˜ë¦¬ (Server)
    â†“
Service ë¡œì§ (Server)
    â†“
Database ì¡°íšŒ (Server)
    â†“
JSON ì‘ë‹µ (Server â†’ Client)
    â†“
========================== ë„¤íŠ¸ì›Œí¬ ==========================
    â†“
Axiosê°€ ì‘ë‹µ ìˆ˜ì‹  (Client)
    â†“
React Query ìºì‹± (Client)
    â†“
UI ì—…ë°ì´íŠ¸ (Client)
```

### í•µì‹¬ ì°¨ì´ì : MPA vs SPA

**ì „í†µì ì¸ MPA (ì„œë²„ ì‚¬ì´ë“œ ë Œë”ë§)**:
```
ë©”ë‰´ í´ë¦­ â†’ ì„œë²„ì— í˜ì´ì§€ ìš”ì²­ â†’ HTML ì „ì²´ ìƒì„± â†’ ë¸Œë¼ìš°ì €ì— ì „ì†¡ â†’ í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨
```

**React SPA (í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ ë Œë”ë§)**:
```
ë©”ë‰´ í´ë¦­ â†’ URL ë³€ê²½ (í´ë¼ì´ì–¸íŠ¸) â†’ ì»´í¬ë„ŒíŠ¸ ë Œë”ë§ â†’ í•„ìš”í•œ ë°ì´í„°ë§Œ APIë¡œ ìš”ì²­
```

ì´ê²ƒì´ Layout ë°©ì‹ì—ì„œ ë©”ë‰´ í´ë¦­ë¶€í„° ì„œë²„ ì‚¬ì´ë“œê¹Œì§€ì˜ ì™„ì „í•œ íë¦„ì…ë‹ˆë‹¤! ğŸ‰
