# MQTT ë©”ì‹œì§€ í…ŒìŠ¤í„° Frontend í†µí•© ê°€ì´ë“œ

## ğŸ“‹ ê°œìš”

messageTypeì— ë”°ë¼ MQTT ë©”ì‹œì§€ë¥¼ í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆëŠ” í”„ë¡ íŠ¸ì—”ë“œ ì»´í¬ë„ŒíŠ¸ë¥¼ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.

---

## ğŸ“¦ ì œê³µ íŒŒì¼

### 1. ì»´í¬ë„ŒíŠ¸ íŒŒì¼
- **MqttMessageTester.jsx** - MQTT ë©”ì‹œì§€ ì „ì†¡ í…ŒìŠ¤í„°
- **MqttMessageMonitor.jsx** - MQTT ë©”ì‹œì§€ ìˆ˜ì‹  ëª¨ë‹ˆí„°
- **Sidebar-updated.jsx** - MQTT ë©”ë‰´ê°€ ì¶”ê°€ëœ Sidebar
- **App-updated.jsx** - MQTT ë¼ìš°íŠ¸ê°€ ì¶”ê°€ëœ App

---

## ğŸš€ ì„¤ì¹˜ ë°©ë²•

### 1. íŒŒì¼ êµ¬ì¡° ìƒì„±

```bash
frontend/
â””â”€â”€ src/
    â””â”€â”€ components/
        â””â”€â”€ mqtt/
            â””â”€â”€ pages/
                â”œâ”€â”€ MqttMessageTester.jsx
                â””â”€â”€ MqttMessageMonitor.jsx
```

### 2. íŒŒì¼ ë°°ì¹˜

```bash
# MQTT ì»´í¬ë„ŒíŠ¸ ë°°ì¹˜
cp MqttMessageTester.jsx src/components/mqtt/pages/
cp MqttMessageMonitor.jsx src/components/mqtt/pages/

# ê¸°ì¡´ íŒŒì¼ ë°±ì—… í›„ êµì²´
cp src/components/app/Sidebar.jsx src/components/app/Sidebar.jsx.backup
cp Sidebar-updated.jsx src/components/app/Sidebar.jsx

cp src/App.jsx src/App.jsx.backup
cp App-updated.jsx src/App.jsx
```

---

## ğŸ¨ ê¸°ëŠ¥ ì„¤ëª…

### 1. MQTT ë©”ì‹œì§€ í…ŒìŠ¤í„° (MqttMessageTester.jsx)

#### ì£¼ìš” ê¸°ëŠ¥
- âœ… 10ê°€ì§€ ë©”ì‹œì§€ íƒ€ì… ì§€ì› (PERIODIC ~ PLAINTEXT)
- âœ… ë©”ì‹œì§€ íƒ€ì…ë³„ ìƒ‰ìƒ êµ¬ë¶„
- âœ… Base64 ì¸ì½”ë”© ìë™ ì²˜ë¦¬
- âœ… Device Serial Number ì…ë ¥ (ìµœëŒ€ 17ì)
- âœ… PLAINTEXT ì „ìš© í…ìŠ¤íŠ¸ ì…ë ¥
- âœ… ì‹¤ì‹œê°„ ì „ì†¡ ê²°ê³¼ í‘œì‹œ

#### ë©”ì‹œì§€ íƒ€ì… ëª©ë¡
| Code | Type | í† í”½ | ì„¤ëª… |
|------|------|------|------|
| 0 | PERIODIC | device/topic/A0 | ì£¼ê¸°ì  ë°ì´í„° |
| 1 | DISCRETE | device/topic/A0 | ì´ë²¤íŠ¸ì„± ë°ì´í„° |
| 2 | REQUEST | device/topic/B0 | ë””ë°”ì´ìŠ¤ ë“±ë¡ ìš”ì²­ |
| 3 | RESPONSE | device/topic/B0 | ì‘ë‹µ |
| 4 | TEST | device/topic/A0 | í…ŒìŠ¤íŠ¸ |
| 5 | ECHO | device/topic/A0 | Echo í…ŒìŠ¤íŠ¸ |
| 6 | FOTA | device/topic/A0 | íŒì›¨ì–´ ì—…ë°ì´íŠ¸ |
| 7 | REBOOT | device/topic/A0 | ì¬ì‹œì‘ |
| 8 | NTP | device/topic/A0 | ì‹œê°„ ë™ê¸°í™” |
| 9 | PLAINTEXT | device/topic/C0 | í‰ë¬¸ í…ìŠ¤íŠ¸ |

#### Base64 ë©”ì‹œì§€ êµ¬ì¡°
```
[0-3]:  deviceID (4 bytes) - 0x00000000
[4]:    topicType (1 byte) - message type code
[5-21]: serialNo (17 bytes) - device serial number
```

---

### 2. MQTT ë©”ì‹œì§€ ëª¨ë‹ˆí„° (MqttMessageMonitor.jsx)

#### ì£¼ìš” ê¸°ëŠ¥
- âœ… ì‹¤ì‹œê°„ ë©”ì‹œì§€ ìˆ˜ì‹  ëª¨ë‹ˆí„°ë§
- âœ… ìë™ ìƒˆë¡œê³ ì¹¨ (5ì´ˆ ê°„ê²©)
- âœ… ë©”ì‹œì§€ íƒ€ì…ë³„ í•„í„°ë§
- âœ… CSV ë‹¤ìš´ë¡œë“œ
- âœ… ë©”ì‹œì§€ ìƒì„¸ ë³´ê¸°
- âœ… í†µê³„ ëŒ€ì‹œë³´ë“œ

#### í™”ë©´ êµ¬ì„±
- ë©”ì‹œì§€ ë¦¬ìŠ¤íŠ¸ í…Œì´ë¸”
- íƒ€ì…ë³„ í†µê³„ ì¹´ë“œ
- í•„í„° ë° ì•¡ì…˜ ë²„íŠ¼
- ìë™/ìˆ˜ë™ ìƒˆë¡œê³ ì¹¨

---

## ğŸ¯ ì‚¬ìš© ë°©ë²•

### 1. ë©”ë‰´ ì ‘ê·¼

**Sidebar ë©”ë‰´:**
```
MQTT
â”œâ”€â”€ ë©”ì‹œì§€ í…ŒìŠ¤í„°  (/mqtt/tester)
â””â”€â”€ ë©”ì‹œì§€ ëª¨ë‹ˆí„°  (/mqtt/monitor)
```

### 2. ë©”ì‹œì§€ í…ŒìŠ¤í„° ì‚¬ìš©

1. **ë©”ì‹œì§€ íƒ€ì… ì„ íƒ**
   - 10ê°€ì§€ íƒ€ì… ì¤‘ í•˜ë‚˜ í´ë¦­

2. **Device ID ì…ë ¥** (PLAINTEXT ì œì™¸)
   - ì˜ˆ: `EST-ROZ-253700001`
   - ìµœëŒ€ 17ì (ë‚˜ë¨¸ì§€ëŠ” ìë™ íŒ¨ë”©)

3. **í…ìŠ¤íŠ¸ ì…ë ¥** (PLAINTEXTë§Œ)
   - ì „ì†¡í•  í‰ë¬¸ í…ìŠ¤íŠ¸ ì…ë ¥

4. **ì „ì†¡ ë²„íŠ¼ í´ë¦­**
   - "MQTT ë©”ì‹œì§€ ì „ì†¡" ë²„íŠ¼

5. **ê²°ê³¼ í™•ì¸**
   - ì˜¤ë¥¸ìª½ íŒ¨ë„ì—ì„œ ì „ì†¡ ê²°ê³¼ í™•ì¸

### 3. ë©”ì‹œì§€ ëª¨ë‹ˆí„° ì‚¬ìš©

1. **ìë™ ìƒˆë¡œê³ ì¹¨ ì„¤ì •**
   - ì²´í¬ë°•ìŠ¤ë¡œ ON/OFF

2. **í•„í„° ì„ íƒ**
   - ë“œë¡­ë‹¤ìš´ì—ì„œ ë©”ì‹œì§€ íƒ€ì… ì„ íƒ

3. **ë©”ì‹œì§€ í™•ì¸**
   - í…Œì´ë¸”ì—ì„œ ìˆ˜ì‹ ëœ ë©”ì‹œì§€ í™•ì¸
   - ğŸ‘ï¸ ì•„ì´ì½˜ í´ë¦­ìœ¼ë¡œ ìƒì„¸ ë³´ê¸°

4. **ë°ì´í„° ë‹¤ìš´ë¡œë“œ**
   - "CSV ë‹¤ìš´ë¡œë“œ" ë²„íŠ¼

---

## ğŸ”Œ ë°±ì—”ë“œ API ì—°ë™

### í•„ìš”í•œ API ì—”ë“œí¬ì¸íŠ¸

#### 1. MQTT ë©”ì‹œì§€ ë°œí–‰ (Tester)
```javascript
POST /api/mqtt/publish
Content-Type: application/json

{
  "topic": "device/topic/B0",
  "payload": "AAAAAAJFU1QtUk9aLTI1MzcwMDAwMg==",
  "qos": 0
}

Response:
{
  "success": true,
  "messageId": "uuid",
  "timestamp": "ISO-8601"
}
```

#### 2. MQTT ë©”ì‹œì§€ ì¡°íšŒ (Monitor)
```javascript
GET /api/mqtt/messages
Query Params: ?type=REQUEST&limit=100

Response:
[
  {
    "messageId": "uuid",
    "messageType": "REQUEST",
    "topic": "device/topic/B0",
    "deviceId": "EST-ROZ-253700002",
    "payload": "base64-string",
    "timestamp": "ISO-8601"
  }
]
```

---

## ğŸ› ï¸ ì»¤ìŠ¤í„°ë§ˆì´ì§•

### 1. ë©”ì‹œì§€ íƒ€ì… ì¶”ê°€/ìˆ˜ì •

```javascript
// MqttMessageTester.jsx - messageTypes ë°°ì—´ ìˆ˜ì •
const messageTypes = [
  { 
    code: 10,                    // ìƒˆë¡œìš´ ì½”ë“œ
    name: 'CUSTOM',              // íƒ€ì…ëª…
    label: 'ì»¤ìŠ¤í…€ ë©”ì‹œì§€',       // í‘œì‹œëª…
    topic: 'device/topic/D0',    // MQTT í† í”½
    description: 'ì„¤ëª…',
    color: 'cyan'                // ìƒ‰ìƒ
  }
]
```

### 2. API ì—”ë“œí¬ì¸íŠ¸ ë³€ê²½

```javascript
// MqttMessageTester.jsx - sendMqttMessage í•¨ìˆ˜
const response = await fetch('/api/mqtt/publish', {  // â† ì—¬ê¸° ìˆ˜ì •
  method: 'POST',
  // ...
})

// MqttMessageMonitor.jsx - loadMessages í•¨ìˆ˜
const response = await fetch('/api/mqtt/messages')  // â† ì—¬ê¸° ìˆ˜ì •
```

### 3. ìƒ‰ìƒ í…Œë§ˆ ë³€ê²½

```javascript
// ìƒ‰ìƒ í´ë˜ìŠ¤ ìˆ˜ì •
const colorClasses = {
  blue: 'bg-blue-500 hover:bg-blue-600',
  // ì›í•˜ëŠ” ìƒ‰ìƒ ì¶”ê°€
  custom: 'bg-cyan-500 hover:bg-cyan-600'
}
```

---

## ğŸ“Š í™”ë©´ ë¯¸ë¦¬ë³´ê¸°

### MQTT ë©”ì‹œì§€ í…ŒìŠ¤í„°
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ”˜ MQTT ë©”ì‹œì§€ í…ŒìŠ¤í„°                       â”‚
â”‚ IoT ë””ë°”ì´ìŠ¤ ë©”ì‹œì§€ ì‹œë®¬ë ˆì´ì…˜              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ë©”ì‹œì§€ íƒ€ì… ì„ íƒ      â”‚  ì „ì†¡ ê²°ê³¼          â”‚
â”‚                       â”‚                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”    â”‚  âœ… ì „ì†¡ ì„±ê³µ       â”‚
â”‚ â”‚PERIODICâ”‚DISCRETEâ”‚   â”‚                     â”‚
â”‚ â”‚  (0)   â”‚  (1)   â”‚   â”‚  Type: REQUEST      â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  Topic: device/...  â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”    â”‚  Device: EST-ROZ... â”‚
â”‚ â”‚REQUESTâ”‚RESPONSEâ”‚    â”‚  Payload: AAAAA...  â”‚
â”‚ â”‚  (2)   â”‚  (3)   â”‚   â”‚                     â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚                     â”‚
â”‚                       â”‚                     â”‚
â”‚ Device ID:            â”‚                     â”‚
â”‚ [EST-ROZ-253700001]   â”‚                     â”‚
â”‚                       â”‚                     â”‚
â”‚ [MQTT ë©”ì‹œì§€ ì „ì†¡]    â”‚                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### MQTT ë©”ì‹œì§€ ëª¨ë‹ˆí„°
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸŸ¢ MQTT ë©”ì‹œì§€ ëª¨ë‹ˆí„°                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Filter: [ALL â–¼]  125ê°œ ë©”ì‹œì§€               â”‚
â”‚ [CSV ë‹¤ìš´ë¡œë“œ] [ì „ì²´ ì‚­ì œ]                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ì‹œê°„ â”‚ íƒ€ì…    â”‚ í† í”½     â”‚Device  â”‚Payloadâ”‚
â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚12:30 â”‚REQUEST  â”‚device/..â”‚EST-ROZ.â”‚AAAA...â”‚
â”‚12:29 â”‚PERIODIC â”‚device/..â”‚EST-ROZ.â”‚BBBB...â”‚
â”‚12:28 â”‚PLAINTEXTâ”‚device/..â”‚  -     â”‚Hello..â”‚
â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜

í†µê³„:
PERIODIC: 45  DISCRETE: 12  REQUEST: 23
PLAINTEXT: 8  ECHO: 15     FOTA: 2
```

---

## âœ… ì²´í¬ë¦¬ìŠ¤íŠ¸

### í”„ë¡ íŠ¸ì—”ë“œ
- [ ] `src/components/mqtt/pages/` ë””ë ‰í† ë¦¬ ìƒì„±
- [ ] `MqttMessageTester.jsx` íŒŒì¼ ë°°ì¹˜
- [ ] `MqttMessageMonitor.jsx` íŒŒì¼ ë°°ì¹˜
- [ ] `Sidebar.jsx` ì—…ë°ì´íŠ¸ (Radio ì•„ì´ì½˜, MQTT ë©”ë‰´)
- [ ] `App.jsx` ì—…ë°ì´íŠ¸ (ë¼ìš°íŠ¸ ì¶”ê°€)
- [ ] npm install (í•„ìš”í•œ ê²½ìš°)

### ë°±ì—”ë“œ
- [ ] `/api/mqtt/publish` ì—”ë“œí¬ì¸íŠ¸ êµ¬í˜„
- [ ] `/api/mqtt/messages` ì—”ë“œí¬ì¸íŠ¸ êµ¬í˜„
- [ ] CORS ì„¤ì • í™•ì¸
- [ ] ì¸ì¦/ê¶Œí•œ ì„¤ì •

### í…ŒìŠ¤íŠ¸
- [ ] MQTT í…ŒìŠ¤í„° í™”ë©´ ì ‘ê·¼ í™•ì¸
- [ ] ë©”ì‹œì§€ íƒ€ì…ë³„ ì „ì†¡ í…ŒìŠ¤íŠ¸
- [ ] Base64 ì¸ì½”ë”© í™•ì¸
- [ ] PLAINTEXT ì „ì†¡ í…ŒìŠ¤íŠ¸
- [ ] ëª¨ë‹ˆí„° í™”ë©´ ì ‘ê·¼ í™•ì¸
- [ ] í•„í„°ë§ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸
- [ ] CSV ë‹¤ìš´ë¡œë“œ í…ŒìŠ¤íŠ¸

---

## ğŸ¯ ë‹¤ìŒ ë‹¨ê³„

1. **ë°±ì—”ë“œ API êµ¬í˜„**
   ```java
   @PostMapping("/api/mqtt/publish")
   public ResponseEntity<?> publishMessage(@RequestBody MqttPublishRequest request) {
       // MQTT ë©”ì‹œì§€ ë°œí–‰ ë¡œì§
   }
   
   @GetMapping("/api/mqtt/messages")
   public ResponseEntity<?> getMessages(@RequestParam(required = false) String type) {
       // ë©”ì‹œì§€ ì¡°íšŒ ë¡œì§
   }
   ```

2. **WebSocket ì—°ë™** (ì„ íƒì‚¬í•­)
   - ì‹¤ì‹œê°„ ë©”ì‹œì§€ ìˆ˜ì‹  í‘œì‹œ
   - ëª¨ë‹ˆí„° í™”ë©´ ìë™ ì—…ë°ì´íŠ¸

3. **ì¶”ê°€ ê¸°ëŠ¥**
   - ë©”ì‹œì§€ ì¬ì „ì†¡
   - ë©”ì‹œì§€ íˆìŠ¤í† ë¦¬
   - ëŒ€ëŸ‰ ì „ì†¡ (Bulk)
   - ìŠ¤ì¼€ì¤„ë§

---

## ğŸ› íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### ë¬¸ì œ: ë©”ë‰´ê°€ ë³´ì´ì§€ ì•ŠìŒ
**í•´ê²°:** Sidebar.jsxì˜ iconMapì— 'Radio' ì¶”ê°€ í™•ì¸

### ë¬¸ì œ: ë¼ìš°íŠ¸ 404 ì—ëŸ¬
**í•´ê²°:** App.jsxì— MQTT ë¼ìš°íŠ¸ ì¶”ê°€ í™•ì¸

### ë¬¸ì œ: API ì—°ê²° ì‹¤íŒ¨
**í•´ê²°:** 
1. ë°±ì—”ë“œ API ì—”ë“œí¬ì¸íŠ¸ í™•ì¸
2. CORS ì„¤ì • í™•ì¸
3. ë„¤íŠ¸ì›Œí¬ íƒ­ì—ì„œ ìš”ì²­ í™•ì¸

### ë¬¸ì œ: Base64 ì¸ì½”ë”© ì˜¤ë¥˜
**í•´ê²°:**
1. deviceId ê¸¸ì´ í™•ì¸ (17ì ì´ˆê³¼ ì‹œ ì˜ë¦¼)
2. ë¸Œë¼ìš°ì € ì½˜ì†”ì—ì„œ ìƒì„±ëœ Base64 í™•ì¸

---

## ğŸ“ ì°¸ê³ ì‚¬í•­

- **ê¶Œí•œ**: USER ì´ìƒ í•„ìš” (GUESTëŠ” ì ‘ê·¼ ë¶ˆê°€)
- **ì•„ì´ì½˜**: lucide-reactì˜ Radio ì•„ì´ì½˜ ì‚¬ìš©
- **ìƒ‰ìƒ**: Tailwind CSS ê¸°ë³¸ íŒ”ë ˆíŠ¸ ì‚¬ìš©
- **ë°˜ì‘í˜•**: ëª¨ë°”ì¼ í™”ë©´ ì§€ì›

---

## ğŸ‰ ì™„ë£Œ!

MQTT ë©”ì‹œì§€ í…ŒìŠ¤í„°ê°€ ì„±ê³µì ìœ¼ë¡œ í†µí•©ë˜ì—ˆìŠµë‹ˆë‹¤.
ë©”ë‰´ì—ì„œ "MQTT > ë©”ì‹œì§€ í…ŒìŠ¤í„°"ë¡œ ì´ë™í•˜ì—¬ í…ŒìŠ¤íŠ¸ë¥¼ ì‹œì‘í•˜ì„¸ìš”!
